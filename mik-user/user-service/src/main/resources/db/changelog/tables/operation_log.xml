<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="#operation@create#table@operation_log#time@2018-12-20" author="linguoshuai" labels="mik">
        <preConditions onFail="MARK_RAN" onErrorMessage="表operation_log已存在,不需要创建">
            <not>
                <tableExists tableName="operation_log"/>
            </not>
        </preConditions>
        <sql>
            CREATE TABLE `operation_log` (
                                             `operation_id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '操作日志主键ID',
                                             `user_id` bigint(20) DEFAULT NULL COMMENT '用户ID',
                                             `operation_name` varchar(255) DEFAULT NULL COMMENT '操作名称',
                                             `ip` varchar(45) DEFAULT NULL COMMENT 'IP地址',
                                             `url` varchar(1000) DEFAULT NULL COMMENT '请求URL',
                                             `param` text COMMENT '请求参数',
                                             `result` int(11) DEFAULT NULL COMMENT '操作结果（例如：0-失败，1-成功）',
                                             `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                                             `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                                             PRIMARY KEY (`operation_id`)
            ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT='操作日志表';
        </sql>
    </changeSet>
</databaseChangeLog>